var field=document.querySelector(".field"),cells=document.querySelectorAll(".cell"),clickNumber=0,winCombinations=[[1,0,0,0,1,0,0,0,1],[0,0,1,0,1,0,1,0,0],[1,1,1,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,1,1,1],[1,0,0,1,0,0,1,0,0],[0,1,0,0,1,0,0,1,0],[0,0,1,0,0,1,0,0,1]];function clearField(){for(var e=0;e<cells.length;e++)cells[e].classList.contains("x")&&(cells[e].classList.remove("x"),cells[e].classList.add("empty")),cells[e].classList.contains("o")&&(cells[e].classList.remove("o"),cells[e].classList.add("empty")),field.classList.contains("o-turn")&&(field.classList.remove("o-turn"),field.classList.add("x-turn"))}function finishGame(e){alert(e+" победили!")}function checkForWinner(){for(var e=new Array,s=new Array,l=0;l<cells.length;l++)e[l]=cells[l].classList.contains("x"),s[l]=cells[l].classList.contains("o");for(var i=0;i<winCombinations.length;i++){var c=!0,t=!0;for(l=0;l<9&&(1!=winCombinations[i][l]||(e[l]||(c=!1),s[l]||(t=!1),c||t));l++);if(c)return finishGame("X"),clickNumber=0,setTimeout(clearField,3e3),1;if(t)return finishGame("O"),clickNumber=0,setTimeout(clearField,3e3),1}return 0}for(var i=0;i<cells.length;i++)cells[i].addEventListener("click",function(e){e.target.classList.contains("empty")&&(clickNumber++,field.classList.contains("x-turn")?e.target.classList.add("x"):e.target.classList.add("o"),e.target.classList.remove("empty"),field.classList.toggle("x-turn"),field.classList.toggle("o-turn")),5<=clickNumber&&checkForWinner(),9==clickNumber&&(checkForWinner()||(alert("Ничья!"),setTimeout(clearField,3e3),clickNumber=0))});